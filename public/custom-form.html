<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø·Ù„Ø¨ Ø®Ø§Øµ - Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="logo">ğŸ“ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©</div>
            <ul class="nav-links">
                <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="my-orders.html">Ø·Ù„Ø¨Ø§ØªÙŠ</a></li>
                <li><a href="admin-panel.html">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <div class="form-container fade-in">
            <h2>âœ¨ Ø·Ù„Ø¨ Ø®Ø§Øµ</h2>
            <p class="text-secondary mb-lg">Ù„Ø¯ÙŠÙƒ Ø·Ù„Ø¨ Ù…Ø®ØªÙ„Ù Ø£Ùˆ Ø®Ø§ØµØŸ Ø§ÙƒØªØ¨ Ù„Ù†Ø§ Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡ ÙˆØ³Ù†Ø³Ø§Ø¹Ø¯Ùƒ</p>

            <form id="customForm">
                <div class="form-group">
                    <label for="customerName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
                    <input type="text" id="customerName" name="customerName" required>
                </div>

                <div class="form-group">
                    <label for="customerEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *</label>
                    <input type="email" id="customerEmail" name="customerEmail" required>
                </div>

                <div class="form-group">
                    <label for="requestDescription">ÙˆØµÙ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ *</label>
                    <textarea id="requestDescription" name="requestDescription" 
                              placeholder="Ø§Ø´Ø±Ø­ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡... ÙŠÙ…ÙƒÙ†Ùƒ Ø°ÙƒØ±:&#10;- Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©&#10;- Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„Ù…ÙˆØ§ØµÙØ§Øª&#10;- Ø£ÙŠ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø®Ø§ØµØ©&#10;- Ø£Ù…Ø«Ù„Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª"
                              style="min-height: 200px;" required></textarea>
                </div>

                <div class="form-group">
                    <label for="deadline">Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ *</label>
                    <input type="date" id="deadline" name="deadline" required>
                </div>

                <div class="form-group">
                    <label for="specificRequirements">Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…Ø­Ø¯Ø¯Ø©</label>
                    <textarea id="specificRequirements" name="specificRequirements" 
                              placeholder="Ø£ÙŠ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©..."></textarea>
                </div>

                <div class="form-actions">
                    <a href="index.html" class="btn btn-secondary">Ø¥Ù„ØºØ§Ø¡</a>
                    <button type="submit" class="btn btn-primary">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
                </div>
            </form>
        </div>
    </main>

    <script src="app.js"></script>
    <script>
        document.getElementById('customForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = {
                service_type: 'custom',
                customer_name: document.getElementById('customerName').value,
                customer_email: document.getElementById('customerEmail').value,
                details: {
                    requestDescription: document.getElementById('requestDescription').value,
                    deadline: document.getElementById('deadline').value,
                    specificRequirements: document.getElementById('specificRequirements').value
                }
            };

            try {
                const response = await fetch(API_BASE + '/api/orders', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();
                
                if (result.success) {
                    alert('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†Ø±Ø§Ø¬Ø¹Ù‡ ÙˆÙ†Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„ÙŠÙ‡ ÙÙˆØ±Ø§Ù‹');
                    window.location.href = 'my-orders.html?email=' + formData.customer_email;
                } else {
                    alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: ' + result.error);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
            }
        });

        document.getElementById('deadline').min = new Date().toISOString().split('T')[0];
    </script>
</body>
</html>
