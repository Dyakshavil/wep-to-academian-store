<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø·Ù„Ø¨ ÙƒØªØ§Ø¨Ø© Ø¨Ø­Ø« - Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="logo">ğŸ“ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©</div>
            <ul class="nav-links">
                <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="my-orders.html">Ø·Ù„Ø¨Ø§ØªÙŠ</a></li>
                <li><a href="admin-panel.html">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <div class="form-container fade-in">
            <h2>ğŸ“š Ø·Ù„Ø¨ ÙƒØªØ§Ø¨Ø© Ø¨Ø­Ø« Ø¹Ù„Ù…ÙŠ</h2>
            <p class="text-secondary mb-lg">Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ÙˆØ³Ù†Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¨Ø­Ø«Ùƒ ÙÙˆØ±Ø§Ù‹</p>

            <form id="researchForm">
                <div class="form-group">
                    <label for="customerName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
                    <input type="text" id="customerName" name="customerName" required>
                </div>

                <div class="form-group">
                    <label for="customerEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *</label>
                    <input type="email" id="customerEmail" name="customerEmail" required>
                </div>

                <div class="form-group">
                    <label for="subject">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ / Ø§Ù„Ù…Ø§Ø¯Ø© *</label>
                    <input type="text" id="subject" name="subject" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù„Ù… Ø§Ù„Ù†ÙØ³ØŒ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ØŒ Ø§Ù„ØªØ§Ø±ÙŠØ®" required>
                </div>

                <div class="form-group">
                    <label for="title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø­Ø« *</label>
                    <input type="text" id="title" name="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø·Ù„ÙˆØ¨" required>
                </div>

                <div class="form-group">
                    <label for="pages">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙØ­Ø§Øª *</label>
                    <input type="number" id="pages" name="pages" min="1" max="100" placeholder="Ù…Ø«Ø§Ù„: 10" required>
                </div>

                <div class="form-group">
                    <label for="academicLevel">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ *</label>
                    <select id="academicLevel" name="academicLevel" required>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰</option>
                        <option value="Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠÙˆØ³">Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠÙˆØ³</option>
                        <option value="Ù…Ø§Ø¬Ø³ØªÙŠØ±">Ù…Ø§Ø¬Ø³ØªÙŠØ±</option>
                        <option value="Ø¯ÙƒØªÙˆØ±Ø§Ù‡">Ø¯ÙƒØªÙˆØ±Ø§Ù‡</option>
                        <option value="Ø¯Ø¨Ù„ÙˆÙ…">Ø¯Ø¨Ù„ÙˆÙ…</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="citationStyle">Ù†ÙˆØ¹ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ *</label>
                    <select id="citationStyle" name="citationStyle" required>
                        <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙˆØ«ÙŠÙ‚</option>
                        <option value="APA">APA</option>
                        <option value="MLA">MLA</option>
                        <option value="Chicago">Chicago</option>
                        <option value="Harvard">Harvard</option>
                        <option value="IEEE">IEEE</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="deadline">Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ *</label>
                    <input type="date" id="deadline" name="deadline" required>
                </div>

                <div class="form-group">
                    <label for="additionalNotes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                    <textarea id="additionalNotes" name="additionalNotes" placeholder="Ø£ÙŠ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø£Ùˆ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©..."></textarea>
                </div>

                <div class="form-actions">
                    <a href="index.html" class="btn btn-secondary">Ø¥Ù„ØºØ§Ø¡</a>
                    <button type="submit" class="btn btn-primary">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
                </div>
            </form>
        </div>
    </main>

    <script src="app.js"></script>
    <script>
        document.getElementById('researchForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = {
                service_type: 'research',
                customer_name: document.getElementById('customerName').value,
                customer_email: document.getElementById('customerEmail').value,
                details: {
                    subject: document.getElementById('subject').value,
                    title: document.getElementById('title').value,
                    pages: document.getElementById('pages').value,
                    academicLevel: document.getElementById('academicLevel').value,
                    citationStyle: document.getElementById('citationStyle').value,
                    deadline: document.getElementById('deadline').value,
                    additionalNotes: document.getElementById('additionalNotes').value
                }
            };

            try {
                const response = await fetch(API_BASE + '/api/orders', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();
                
                if (result.success) {
                    alert('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„ÙŠÙ‡ ÙÙˆØ±Ø§Ù‹');
                    window.location.href = 'my-orders.html?email=' + formData.customer_email;
                } else {
                    alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: ' + result.error);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
            }
        });

        // Set minimum date to today
        document.getElementById('deadline').min = new Date().toISOString().split('T')[0];
    </script>
</body>
</html>
